<script>
    let products = JSON.parse(localStorage.getItem("products")) || {
        haircare: [],
        makeup: [],
        skincare: []
    };

    function addProduct() {
        const category = prompt("Enter category (haircare, makeup, skincare):").toLowerCase();
        const name = prompt("Enter product name:");
        const retailPrice = prompt("Enter retail price:");
        const price = prompt("Enter your price:");
        const image = prompt("Enter image URL:");
        const type = confirm("Is this a bid product? OK = Yes, Cancel = No") ? "bid" : "reserve";

        if (category in products && name && price && image) {
            products[category].push({ name, retailPrice, price, image, type });
            localStorage.setItem("products", JSON.stringify(products));
            alert("Product added successfully!");
        } else {
            alert("Invalid input. Try again.");
        }
    }

    function editProduct() {
        const category = prompt("Enter category (haircare, makeup, skincare):").toLowerCase();
        const name = prompt("Enter the product name you want to edit:");

        let product = products[category]?.find(p => p.name === name);
        if (product) {
            product.name = prompt("New product name:", product.name);
            product.retailPrice = prompt("New retail price:", product.retailPrice);
            product.price = prompt("New price:", product.price);
            product.image = prompt("New image URL:", product.image);
            localStorage.setItem("products", JSON.stringify(products));
            alert("Product updated!");
        } else {
            alert("Product not found.");
        }
    }

    function deleteProduct() {
        const category = prompt("Enter category (haircare, makeup, skincare):").toLowerCase();
        const name = prompt("Enter the product name to delete:");

        products[category] = products[category]?.filter(p => p.name !== name);
        localStorage.setItem("products", JSON.stringify(products));
        alert("Product deleted.");
    }

    function viewReservations() {
        let reservations = JSON.parse(localStorage.getItem("reservations")) || [];
        if (reservations.length === 0) {
            alert("No reservations yet.");
        } else {
            let message = "Reservations:\n";
            reservations.forEach(r => message += `${r.user} reserved ${r.item}\n`);
            alert(message);
        }
    }

    function manageBids() {
        let bids = JSON.parse(localStorage.getItem("bids")) || [];
        if (bids.length === 0) {
            alert("No bids yet.");
        } else {
            let message = "Bids:\n";
            bids.forEach(b => message += `${b.user} bid $${b.amount} on ${b.item}\n`);
            alert(message);
        }
    }
</script>
